
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inside A Docutils Command-Line Front-End Tool &#8212; Thy&#39;s Notes  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Thy's Notes</a></h1>



<p class="blurb">Collection of Notes, Snippets, HowTos, Public Docs, etc</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../public_index.html">Public Docs</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="inside-a-docutils-command-line-front-end-tool">
<h1>Inside A Docutils Command-Line Front-End Tool<a class="headerlink" href="#inside-a-docutils-command-line-front-end-tool" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>David Goodger</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p><a class="reference external" href="mailto:docutils-develop&#37;&#52;&#48;lists&#46;sourceforge&#46;net">docutils-develop<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></p>
</dd>
<dt class="field-odd">Date</dt>
<dd class="field-odd"><p>$Date$</p>
</dd>
<dt class="field-even">Revision</dt>
<dd class="field-even"><p>$Revision$</p>
</dd>
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>This document has been placed in the public domain.</p>
</dd>
</dl>
<p><a class="reference external" href="./publisher.html">The Docutils Publisher</a> class was set up to make building
command-line tools easy.  All that’s required is to choose components
and supply settings for variations.  Let’s take a look at a typical
command-line front-end tool, <code class="docutils literal notranslate"><span class="pre">tools/rst2html.py</span></code>, from top to
bottom.</p>
<p>On Unixish systems, it’s best to make the file executable (<code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span>
<span class="pre">file</span></code>), and supply an interpreter on the first line, the “shebang” or
“hash-bang” line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
</pre></div>
</div>
<p>Windows systems can be set up to associate the Python interpreter with
the <code class="docutils literal notranslate"><span class="pre">.py</span></code> extension.</p>
<p>Next are some comments providing metadata:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># $Id$</span>
<span class="c1"># Author: David Goodger &lt;goodger@python.org&gt;</span>
<span class="c1"># Copyright: This module has been placed in the public domain.</span>
</pre></div>
</div>
<p>The module docstring describes the purpose of the tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A minimal front end to the Docutils Publisher, producing HTML.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>This next block attempts to invoke locale support for
internationalization services, specifically text encoding.  It’s not
supported on all platforms though, so it’s forgiving:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">locale</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The real work will be done by the code that’s imported here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">docutils.core</span> <span class="kn">import</span> <span class="n">publish_cmdline</span><span class="p">,</span> <span class="n">default_description</span>
</pre></div>
</div>
<p>We construct a description of the tool, for command-line help:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">description</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Generates (X)HTML documents from standalone &#39;</span>
               <span class="s1">&#39;reStructuredText sources.  &#39;</span> <span class="o">+</span> <span class="n">default_description</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we call the Publisher convenience function, which takes over.
Most of its defaults are used (“standalone” Reader,
“reStructuredText” Parser, etc.).  The HTML Writer is chosen by name,
and a description for command-line help is passed in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">publish_cmdline</span><span class="p">(</span><span class="n">writer_name</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
</pre></div>
</div>
<p>That’s it!  <a class="reference external" href="./publisher.html">The Docutils Publisher</a> takes care of the rest.</p>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Thierry Humphrey.
      
    </div>

    

    
  </body>
</html>