
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python Source Reader &#8212; Thy&#39;s Notes  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Thy's Notes</a></h1>



<p class="blurb">Collection of Notes, Snippets, HowTos, Public Docs, etc</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../public_index.html">Public Docs</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="python-source-reader">
<h1><a class="toc-backref" href="#id3">Python Source Reader</a><a class="headerlink" href="#python-source-reader" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>David Goodger</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p><a class="reference external" href="mailto:docutils-develop&#37;&#52;&#48;lists&#46;sourceforge&#46;net">docutils-develop<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></p>
</dd>
<dt class="field-odd">Revision</dt>
<dd class="field-odd"><p>$Revision$</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>$Date$</p>
</dd>
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>This document has been placed in the public domain.</p>
</dd>
</dl>
<p>This document explores issues around extracting and processing
docstrings from Python modules.</p>
<p>For definitive element hierarchy details, see the “Python Plaintext
Document Interface DTD” XML document type definition, <a class="reference external" href="pysource.dtd">pysource.dtd</a>
(which modifies the generic <a class="reference external" href="../ref/docutils.dtd">docutils.dtd</a>).  Descriptions below list
‘DTD elements’ (XML ‘generic identifiers’ or tag names) corresponding
to syntax constructs.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#python-source-reader" id="id3">Python Source Reader</a></p>
<ul>
<li><p><a class="reference internal" href="#model" id="id4">Model</a></p></li>
<li><p><a class="reference internal" href="#docstring-extractor" id="id5">Docstring Extractor</a></p></li>
<li><p><a class="reference internal" href="#interpreted-text" id="id6">Interpreted Text</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="model">
<h2><a class="toc-backref" href="#id4">Model</a><a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>The Python Source Reader (“PySource”) model that’s evolving in my mind
goes something like this:</p>
<ol class="arabic">
<li><p>Extract the docstring/namespace <a class="footnote-reference brackets" href="#id2" id="id1">1</a> tree from the module(s) and/or
package(s).</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>See <a class="reference internal" href="#docstring-extractor">Docstring Extractor</a> below.</p>
</dd>
</dl>
</li>
<li><p>Run the parser on each docstring in turn, producing a forest of
doctrees (per nodes.py).</p></li>
<li><p>Join the docstring trees together into a single tree, running
transforms:</p>
<ul class="simple">
<li><p>merge hyperlinks</p></li>
<li><p>merge namespaces</p></li>
<li><p>create various sections like “Module Attributes”, “Functions”,
“Classes”, “Class Attributes”, etc.; see <a class="reference external" href="pysource.dtd">pysource.dtd</a></p></li>
<li><p>convert the above special sections to ordinary doctree nodes</p></li>
</ul>
</li>
<li><p>Run transforms on the combined doctree.  Examples: resolving
cross-references/hyperlinks (including interpreted text on Python
identifiers); footnote auto-numbering; first field list -&gt;
bibliographic elements.</p>
<p>(Or should step 4’s transforms come before step 3?)</p>
</li>
<li><p>Pass the resulting unified tree to the writer/builder.</p></li>
</ol>
<p>I’ve had trouble reconciling the roles of input parser and output
writer with the idea of modes (“readers” or “directors”).  Does the
mode govern the tranformation of the input, the output, or both?
Perhaps the mode should be split into two.</p>
<p>For example, say the source of our input is a Python module.  Our
“input mode” should be the “Python Source Reader”.  It discovers (from
<code class="docutils literal notranslate"><span class="pre">__docformat__</span></code>) that the input parser is “reStructuredText”.  If we
want HTML, we’ll specify the “HTML” output formatter.  But there’s a
piece missing.  What <em>kind</em> or <em>style</em> of HTML output do we want?
PyDoc-style, LibRefMan style, etc.  (many people will want to specify
and control their own style).  Is the output style specific to a
particular output format (XML, HTML, etc.)?  Is the style specific to
the input mode?  Or can/should they be independent?</p>
<p>I envision interaction between the input parser, an “input mode” , and
the output formatter.  The same intermediate data format would be used
between each of these, being transformed as it progresses.</p>
</div>
<div class="section" id="docstring-extractor">
<h2><a class="toc-backref" href="#id5">Docstring Extractor</a><a class="headerlink" href="#docstring-extractor" title="Permalink to this headline">¶</a></h2>
<p>We need code that scans a parsed Python module, and returns an ordered
tree containing the names, docstrings (including attribute and
additional docstrings), and additional info (in parentheses below) of
all of the following objects:</p>
<ul class="simple">
<li><p>packages</p></li>
<li><p>modules</p></li>
<li><p>module attributes (+ values)</p></li>
<li><p>classes (+ inheritance)</p></li>
<li><p>class attributes (+ values)</p></li>
<li><p>instance attributes (+ values)</p></li>
<li><p>methods (+ formal parameters &amp; defaults)</p></li>
<li><p>functions (+ formal parameters &amp; defaults)</p></li>
</ul>
<p>(Extract comments too?  For example, comments at the start of a module
would be a good place for bibliographic field lists.)</p>
<p>In order to evaluate interpreted text cross-references, namespaces for
each of the above will also be required.</p>
<p>See python-dev/docstring-develop thread “AST mining”, started on
2001-08-14.</p>
</div>
<div class="section" id="interpreted-text">
<h2><a class="toc-backref" href="#id6">Interpreted Text</a><a class="headerlink" href="#interpreted-text" title="Permalink to this headline">¶</a></h2>
<p>DTD elements: package, module, class, method, function,
module_attribute, class_attribute, instance_attribute, variable,
parameter, type, exception_class, warning_class.</p>
<p>To classify identifiers explicitly, the role is given along with the
identifier in either prefix or suffix form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Use :method:`Keeper.storedata` to store the object&#39;s data in
`Keeper.data`:instance_attribute:.
</pre></div>
</div>
<p>The role may be one of ‘package’, ‘module’, ‘class’, ‘method’,
‘function’, ‘module_attribute’, ‘class_attribute’,
‘instance_attribute’, ‘variable’, ‘parameter’, ‘type’,
‘exception_class’, ‘exception’, ‘warning_class’, or ‘warning’.  Other
roles may be defined.</p>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Thierry Humphrey.
      
    </div>

    

    
  </body>
</html>