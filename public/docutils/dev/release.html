
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Docutils Release Procedure &#8212; Thy&#39;s Notes  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Thy's Notes</a></h1>



<p class="blurb">Collection of Notes, Snippets, HowTos, Public Docs, etc</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../public_index.html">Public Docs</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="docutils-release-procedure">
<h1><a class="reference external" href="http://docutils.sourceforge.io/">Docutils</a> Release Procedure<a class="headerlink" href="#docutils-release-procedure" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>David Goodger; Lea Wiemann; open to all Docutils developers</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p><a class="reference external" href="mailto:docutils-develop&#37;&#52;&#48;lists&#46;sourceforge&#46;net">docutils-develop<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></p>
</dd>
<dt class="field-odd">Date</dt>
<dd class="field-odd"><p>$Date$</p>
</dd>
<dt class="field-even">Revision</dt>
<dd class="field-even"><p>$Revision$</p>
</dd>
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>This document has been placed in the public domain.</p>
</dd>
</dl>
<div class="section" id="releasing-post-2020">
<h2>Releasing (post 2020)<a class="headerlink" href="#releasing-post-2020" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Announce the upcoming release on docutils-develop list.</p>
<p>Consider <strong>feature freeze</strong> or/and <strong>check-in freeze</strong> .</p>
</li>
<li><p>Update RELEASE-NOTES.txt add section <code class="docutils literal notranslate"><span class="pre">Release</span> <span class="pre">&lt;version&gt;</span></code>.</p>
<p>Consult HISTORY.txt for important changes.</p>
</li>
<li><p>Change HISTORY.txt title <code class="docutils literal notranslate"><span class="pre">Changes</span> <span class="pre">Since</span> <span class="pre">&lt;previous</span> <span class="pre">release&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">Release</span> <span class="pre">&lt;version&gt;</span></code>.</p></li>
<li><p>Set new version with <code class="docutils literal notranslate"><span class="pre">sandbox/infrastructure/set_version.sh</span> <span class="pre">&lt;version&gt;</span></code></p>
<p>Check what was changed with version control system by <code class="docutils literal notranslate"><span class="pre">set_version.sh</span></code></p>
<p>Run tests</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PYTHONWARNINGS</span><span class="o">=</span><span class="n">default</span>
<span class="n">python2</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>
<span class="n">python3</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>or use tox.</p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PYTHONWARNINGS=default</span></code> prints DeprecationWarnings in python3.</p>
</li>
<li><p>Generate universal wheel and source-distribution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">sdist</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">bdist_wheel</span> <span class="o">--</span><span class="n">universal</span>
</pre></div>
</div>
</li>
<li><p>Upload universal wheel and source to test.pypi:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">twine</span> <span class="n">upload</span> <span class="o">--</span><span class="n">repository</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">test</span><span class="o">.</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">legacy</span><span class="o">/</span> <span class="n">dist</span><span class="o">/*</span>
</pre></div>
</div>
<p>Wait some minutes to test in virtualenv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python2</span> <span class="o">-</span><span class="n">m</span> <span class="n">virtualenv</span> <span class="n">py2</span><span class="mf">.7</span> <span class="p">;</span> <span class="n">cd</span> <span class="n">py2</span><span class="mf">.7</span>
<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=</span> <span class="p">;</span> <span class="o">.</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">index</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">test</span><span class="o">.</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">docutils</span>

<span class="n">cp</span> <span class="o">-</span><span class="n">Lr</span> <span class="o">../</span><span class="n">docutils</span><span class="o">-</span><span class="n">code</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">test</span> <span class="o">.</span>
<span class="n">python</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">uninstall</span> <span class="n">docutils</span>
<span class="n">deactivate</span> <span class="p">;</span> <span class="n">cd</span> <span class="o">..</span> <span class="p">;</span> <span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="n">du2</span>
</pre></div>
</div>
<p>Test in venv</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">du3</span> <span class="p">;</span> <span class="n">cd</span> <span class="n">du3</span>
<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=</span> <span class="p">;</span> <span class="o">.</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">index</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">test</span><span class="o">.</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">docutils</span>

<span class="n">cp</span> <span class="o">-</span><span class="n">Lr</span> <span class="o">../</span><span class="n">docutils</span><span class="o">-</span><span class="n">code</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">test</span> <span class="o">.</span>
<span class="n">python</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">uninstall</span> <span class="n">docutils</span>
<span class="n">deactivate</span> <span class="p">;</span> <span class="n">cd</span> <span class="o">..</span> <span class="p">;</span> <span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="n">du3</span>
</pre></div>
</div>
</li>
<li><p>Commit changes … the changed version number.</p></li>
<li><p>tag 0.## (Note: only directory docutils is copied):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">svn</span> <span class="n">copy</span> <span class="n">svn</span><span class="o">+</span><span class="n">ssh</span><span class="p">:</span><span class="o">//</span><span class="n">grubert</span><span class="nd">@svn</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">trunk</span><span class="o">/</span><span class="n">docutils</span> \
         <span class="n">svn</span><span class="o">+</span><span class="n">ssh</span><span class="p">:</span><span class="o">//</span><span class="n">grubert</span><span class="nd">@svn</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">tags</span><span class="o">/</span><span class="n">docutils</span><span class="o">-</span><span class="mf">0.</span><span class="c1">## \</span>
         <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;tagging release 0.##&quot;</span>
</pre></div>
</div>
</li>
<li><p>Now upload to pypi:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">twine</span> <span class="n">upload</span>  <span class="n">dist</span><span class="o">/</span><span class="n">docutils</span><span class="o">-</span><span class="mf">0.</span><span class="c1">##*</span>
</pre></div>
</div>
<p>and test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">du3</span> <span class="p">;</span> <span class="n">cd</span> <span class="n">du3</span>
<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=</span> <span class="p">;</span> <span class="o">.</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>

<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">docutils</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">Lr</span> <span class="o">../</span><span class="n">docutils</span><span class="o">-</span><span class="n">code</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">test</span> <span class="o">.</span>
<span class="n">python</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>

<span class="n">python2</span> <span class="o">-</span><span class="n">m</span> <span class="n">virtualenv</span> <span class="n">du2</span> <span class="p">;</span> <span class="n">cd</span> <span class="n">du2</span>
<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=</span> <span class="p">;</span> <span class="o">.</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>

<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">docutils</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">Lr</span> <span class="o">../</span><span class="n">docutils</span><span class="o">-</span><span class="n">code</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">test</span> <span class="o">.</span>
<span class="n">python</span> <span class="n">test</span><span class="o">/</span><span class="n">alltests</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>Notify to docutils-developer and user.</p></li>
<li><p>upload source and generated html to sf-htdocs/0.##</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">tmp1</span>
<span class="n">cd</span> <span class="n">tmp1</span>
<span class="n">tar</span> <span class="n">xzvf</span> <span class="o">../</span><span class="n">dist</span><span class="o">/</span><span class="n">docutils</span><span class="o">-</span><span class="mf">0.</span><span class="c1">##.tar.gz</span>
<span class="n">cd</span> <span class="n">docutils</span><span class="o">-</span><span class="mf">0.</span><span class="c1">##/</span>
<span class="n">tools</span><span class="o">/</span><span class="n">buildhtml</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> \<span class="o">*.</span><span class="n">pyc</span> <span class="o">-</span><span class="n">exec</span> <span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="p">{}</span> \<span class="p">;</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="n">__pycache__</span> <span class="o">-</span><span class="n">exec</span> <span class="n">rmdir</span> <span class="o">-</span><span class="n">v</span> <span class="p">{}</span> \<span class="p">;</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="n">docutils</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>
<span class="n">rsync</span> <span class="o">-</span><span class="n">e</span> <span class="n">ssh</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">t</span> <span class="o">./</span> <span class="n">web</span><span class="o">.</span><span class="n">sourceforge</span><span class="o">.</span><span class="n">net</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">-</span><span class="n">web</span><span class="o">/</span><span class="n">docutils</span><span class="o">/</span><span class="n">htdocs</span><span class="o">/</span><span class="mf">0.</span><span class="c1">##</span>
</pre></div>
</div>
</li>
<li><p>Check web/index.txt for necessary corrections.</p></li>
<li><p>Run sandbox/infrastructure/docutils-update.local to update web-content.</p></li>
<li><p>Release to sourceforge.</p>
<ul class="simple">
<li><p>Upload tar.gz and 0.16 release notes to sourceforge.</p></li>
<li><p>Select docutils-0.16.tar.gz as default for all OS.</p></li>
</ul>
</li>
<li><p>set_version 0.#.#+1b.dev</p></li>
<li><p>test with py2 and py3</p></li>
<li><p>docutils/HISTORY.txt: add title “Changes Since 0.##”</p></li>
<li><p>run sandbox/infrastructure/docutils-update.local</p></li>
</ul>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Thierry Humphrey.
      
    </div>

    

    
  </body>
</html>