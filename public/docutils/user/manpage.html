
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>manpage writer for Docutils &#8212; Thy&#39;s Notes  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Thy's Notes</a></h1>



<p class="blurb">Collection of Notes, Snippets, HowTos, Public Docs, etc</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../public_index.html">Public Docs</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="manpage-writer-for-docutils">
<h1>manpage writer for <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a><a class="headerlink" href="#manpage-writer-for-docutils" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Engelbert Gruber</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p><a class="reference external" href="mailto:docutils-develop&#37;&#52;&#48;lists&#46;sourceforge&#46;net">docutils-develop<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></p>
</dd>
<dt class="field-odd">Revision</dt>
<dd class="field-odd"><p>$Revision$</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>$Date$</p>
</dd>
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>This document has been placed in the public domain.</p>
</dd>
</dl>
<p>This writer explores the posibilities to generate man-pages from
reStructuredText. Man pages are the way for Unix systems to provide
help to the user. GNU does this with (TeX)info-pages.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#manpage-writer-for-docutils" id="id2">manpage writer for Docutils</a></p>
<ul>
<li><p><a class="reference internal" href="#module-information" id="id3">Module information</a></p></li>
<li><p><a class="reference internal" href="#references" id="id4">References</a></p></li>
<li><p><a class="reference internal" href="#conventions" id="id5">Conventions</a></p></li>
<li><p><a class="reference internal" href="#todo-open-issues" id="id6">TODO - Open issues</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-information">
<h2><a class="toc-backref" href="#id3">Module information</a><a class="headerlink" href="#module-information" title="Permalink to this headline">¶</a></h2>
<p>Unix man page belong into a numbered section, 1 is user commands, 8 contains
administrator commands, the headlines of all manpages are collected into a
database, queryable with the programm <code class="docutils literal notranslate"><span class="pre">apropos</span></code>, therefore the headline
should contain a short text describing into which group this command belongs.</p>
<p>These informations are collected from title, subtitle and the docinfo.</p>
<p>Also man pages have a defined set of sections, that are more or less
mandatory, see <a class="reference internal" href="#references">References</a>.</p>
<p>man pages look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">man</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="n">Man</span> <span class="n">Pager</span> <span class="n">Utils</span>     <span class="n">man</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">NAME</span>
    <span class="n">man</span> <span class="o">-</span> <span class="n">an</span> <span class="n">interface</span> <span class="n">to</span> <span class="n">the</span> <span class="n">on</span><span class="o">-</span><span class="n">line</span> <span class="n">reference</span> <span class="n">manuals</span>

<span class="n">SYNOPSIS</span>
    <span class="n">man</span> <span class="p">[</span><span class="o">-</span><span class="n">c</span><span class="o">|-</span><span class="n">w</span><span class="o">|-</span><span class="n">tZT</span> <span class="n">device</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">adhu7V</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="n">system</span><span class="p">[,</span><span class="o">...</span><span class="p">]]</span> <span class="p">[</span><span class="o">-</span><span class="n">L</span> <span class="n">locale</span><span class="p">]</span>
</pre></div>
</div>
<p>in roff formatting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">TH</span> <span class="n">man</span> <span class="mi">1</span> <span class="s2">&quot;14 May 2001&quot;</span> <span class="s2">&quot;2.3.19&quot;</span> <span class="s2">&quot;Manual pager utils&quot;</span>
<span class="o">.</span><span class="n">SH</span> <span class="n">NAME</span>
<span class="n">man</span> \<span class="o">-</span> <span class="n">an</span> <span class="n">interface</span> <span class="n">to</span> <span class="n">the</span> <span class="n">on</span><span class="o">-</span><span class="n">line</span> <span class="n">reference</span> <span class="n">manuals</span>
<span class="o">.</span><span class="n">SH</span> <span class="n">SYNOPSIS</span>
<span class="o">.</span>\<span class="s2">&quot; The general command line</span>
<span class="o">.</span><span class="n">B</span> <span class="n">man</span>
<span class="o">.</span><span class="n">RB</span> <span class="p">[</span>\<span class="o">|</span> \<span class="o">-</span><span class="n">c</span> \<span class="o">||</span>\<span class="o">|</span> \<span class="o">-</span><span class="n">w</span> \<span class="o">||</span>\<span class="o">|</span> \<span class="o">-</span><span class="n">tZT</span>
<span class="o">.</span><span class="n">IR</span> <span class="n">device</span> \<span class="o">|</span><span class="p">]</span>
</pre></div>
</div>
<p>This means we have</p>
<ul class="simple">
<li><p>a title “man”</p></li>
<li><p>a subtitle “an interface to the on-line reference manuals”</p></li>
<li><p>a manual section “1”</p></li>
<li><p>a manual group “Manual pager utils”</p></li>
<li><p>a date “14 May 2001”</p></li>
<li><p>a version “2.3.19”</p></li>
</ul>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id4">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>man pages from section 7, <code class="docutils literal notranslate"><span class="pre">man</span></code> and <code class="docutils literal notranslate"><span class="pre">man-pages</span></code>.</p>
<dl class="citation">
<dt class="label" id="lmht"><span class="brackets"><a class="fn-backref" href="#id1">LMHT</a></span></dt>
<dd><p>Linux Man Page Howto.</p>
</dd>
</dl>
</div>
<div class="section" id="conventions">
<h2><a class="toc-backref" href="#id5">Conventions</a><a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>man pages have a special structure and organization. From the manpage
to <em>man</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">table</span> <span class="n">below</span> <span class="n">shows</span> <span class="n">the</span> <span class="n">section</span> <span class="n">numbers</span> <span class="n">of</span> <span class="n">the</span> <span class="n">manual</span> <span class="n">followed</span>  <span class="n">by</span>  <span class="n">the</span>
<span class="n">types</span> <span class="n">of</span> <span class="n">pages</span> <span class="n">they</span> <span class="n">contain</span><span class="o">.</span>

<span class="mi">1</span>   <span class="n">Executable</span> <span class="n">programs</span> <span class="ow">or</span> <span class="n">shell</span> <span class="n">commands</span>
<span class="mi">2</span>   <span class="n">System</span> <span class="n">calls</span> <span class="p">(</span><span class="n">functions</span> <span class="n">provided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">kernel</span><span class="p">)</span>
<span class="mi">3</span>   <span class="n">Library</span> <span class="n">calls</span> <span class="p">(</span><span class="n">functions</span> <span class="n">within</span> <span class="n">program</span> <span class="n">libraries</span><span class="p">)</span>
<span class="mi">4</span>   <span class="n">Special</span> <span class="n">files</span> <span class="p">(</span><span class="n">usually</span> <span class="n">found</span> <span class="ow">in</span> <span class="o">/</span><span class="n">dev</span><span class="p">)</span>
<span class="mi">5</span>   <span class="n">File</span> <span class="n">formats</span> <span class="ow">and</span> <span class="n">conventions</span> <span class="n">eg</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
<span class="mi">6</span>   <span class="n">Games</span>
<span class="mi">7</span>   <span class="n">Miscellaneous</span>  <span class="p">(</span><span class="n">including</span>  <span class="n">macro</span>  <span class="n">packages</span> <span class="ow">and</span> <span class="n">conven</span><span class="o">-</span>
    <span class="n">tions</span><span class="p">),</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">man</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="n">groff</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="mi">8</span>   <span class="n">System</span> <span class="n">administration</span> <span class="n">commands</span> <span class="p">(</span><span class="n">usually</span> <span class="n">only</span> <span class="k">for</span> <span class="n">root</span><span class="p">)</span>
<span class="mi">9</span>   <span class="n">Kernel</span> <span class="n">routines</span> <span class="p">[</span><span class="n">Non</span> <span class="n">standard</span><span class="p">]</span>

<span class="n">A</span> <span class="n">manual</span> <span class="n">page</span> <span class="n">consists</span> <span class="n">of</span> <span class="n">several</span> <span class="n">parts</span><span class="o">.</span>

<span class="n">They</span>  <span class="n">may</span>  <span class="n">be</span>  <span class="n">labelled</span>  <span class="n">NAME</span><span class="p">,</span>  <span class="n">SYNOPSIS</span><span class="p">,</span>  <span class="n">DESCRIPTION</span><span class="p">,</span>  <span class="n">OPTIONS</span><span class="p">,</span>  <span class="n">FILES</span><span class="p">,</span>
<span class="n">SEE</span> <span class="n">ALSO</span><span class="p">,</span> <span class="n">BUGS</span><span class="p">,</span> <span class="ow">and</span> <span class="n">AUTHOR</span><span class="o">.</span>

<span class="n">The</span>  <span class="n">following</span>  <span class="n">conventions</span> <span class="n">apply</span> <span class="n">to</span> <span class="n">the</span> <span class="n">SYNOPSIS</span> <span class="n">section</span> <span class="ow">and</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span>
<span class="k">as</span> <span class="n">a</span> <span class="n">guide</span> <span class="ow">in</span> <span class="n">other</span> <span class="n">sections</span><span class="o">.</span>

<span class="n">bold</span> <span class="n">text</span>          <span class="nb">type</span> <span class="n">exactly</span> <span class="k">as</span> <span class="n">shown</span><span class="o">.</span>
<span class="n">italic</span> <span class="n">text</span>        <span class="n">replace</span> <span class="k">with</span> <span class="n">appropriate</span> <span class="n">argument</span><span class="o">.</span>
<span class="p">[</span><span class="o">-</span><span class="n">abc</span><span class="p">]</span>             <span class="nb">any</span> <span class="ow">or</span> <span class="nb">all</span> <span class="n">arguments</span> <span class="n">within</span> <span class="p">[</span> <span class="p">]</span> <span class="n">are</span> <span class="n">optional</span><span class="o">.</span>
<span class="o">-</span><span class="n">a</span><span class="o">|-</span><span class="n">b</span>              <span class="n">options</span> <span class="n">delimited</span> <span class="n">by</span> <span class="o">|</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">used</span> <span class="n">together</span><span class="o">.</span>
<span class="n">argument</span> <span class="o">...</span>       <span class="n">argument</span> <span class="ow">is</span> <span class="n">repeatable</span><span class="o">.</span>
<span class="p">[</span><span class="n">expression</span><span class="p">]</span> <span class="o">...</span>   <span class="n">entire</span> <span class="n">expression</span> <span class="n">within</span> <span class="p">[</span> <span class="p">]</span> <span class="ow">is</span> <span class="n">repeatable</span><span class="o">.</span>

<span class="n">The</span> <span class="n">command</span> <span class="ow">or</span> <span class="n">function</span> <span class="n">illustration</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">pattern</span> <span class="n">that</span> <span class="n">should</span>  <span class="n">match</span>  <span class="nb">all</span>
<span class="n">possible</span>  <span class="n">invocations</span><span class="o">.</span>   <span class="n">In</span> <span class="n">some</span> <span class="n">cases</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">advisable</span> <span class="n">to</span> <span class="n">illustrate</span> <span class="n">sev</span><span class="o">-</span>
<span class="n">eral</span> <span class="n">exclusive</span> <span class="n">invocations</span> <span class="k">as</span> <span class="ow">is</span> <span class="n">shown</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">SYNOPSIS</span>  <span class="n">section</span>  <span class="n">of</span>  <span class="n">this</span>
<span class="n">manual</span> <span class="n">page</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>new lines in general.</p>
<p>Consecutive blank lines are merged by the viewer but not on printouts.
So one has to be cautious. This is most disturbing when printing
postscript.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Roff requests only work when at line start.</p></li>
<li><p>But consecutive blank lines are merged by the viewer but not on
printouts.</p></li>
</ol>
<p>So try the rule start new lines in <code class="docutils literal notranslate"><span class="pre">visit_</span></code>-functions, but only if
necessary. E.g. <code class="docutils literal notranslate"><span class="pre">field-names</span></code> are already on a new line because of
docutils structure.</p>
</div>
</li>
<li><p>Indentation, left margin:</p>
<ul>
<li><p>The writer includes two macros <code class="docutils literal notranslate"><span class="pre">.INDENT</span></code> and <code class="docutils literal notranslate"><span class="pre">.UNINDENT</span></code> that
keep track of the indentation in roff-code, for line-blocks python
keeps track of it. WHAT should be the preferred way ?</p>
<p>But standard macros like <code class="docutils literal notranslate"><span class="pre">.PP</span></code> might reset it.</p>
</li>
<li><p>Why do <code class="docutils literal notranslate"><span class="pre">.RE</span></code> and <code class="docutils literal notranslate"><span class="pre">.RS</span></code> not work?</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Current indent is in register <code class="docutils literal notranslate"><span class="pre">.i</span></code>.</p>
</div>
</li>
<li><p><a class="reference internal" href="#lmht" id="id1"><span>[LMHT]</span></a> Filenames are always in italics, except in the SYNOPSIS section,
use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">I</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">stdio</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">B</span> <span class="c1">#include &lt;stdio.h&gt;</span>
</pre></div>
</div>
</li>
<li><p>Tables are possible, via the external processor tbl, although one should
avoid them.</p></li>
</ul>
</div>
<div class="section" id="todo-open-issues">
<h2><a class="toc-backref" href="#id6">TODO - Open issues</a><a class="headerlink" href="#todo-open-issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>How to escape double quotes in macro arguments ?</p></li>
<li><p>Typeset URLs : <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">7</span> <span class="pre">man</span></code> on linux says use <code class="docutils literal notranslate"><span class="pre">.UR</span></code> and <code class="docutils literal notranslate"><span class="pre">.UE</span></code>.</p></li>
<li><p>How to typeset command/manpage names in text.</p></li>
<li><p>How to write long syntax lines.</p></li>
<li><p>Line ends around email or web addresses in texts.
How to distinguish something is inline or not ?</p></li>
<li><p>Images and equations are discouraged.</p></li>
<li><p>Lists in admonitions are not intended.</p></li>
<li><p>Encoding declaration <code class="docutils literal notranslate"><span class="pre">'\&quot;</span> <span class="pre">t</span> <span class="pre">-*-</span> <span class="pre">coding:</span> <span class="pre">ISO-8859-1</span> <span class="pre">-*-</span></code>
in first line.</p>
<p>BUT if UTF-8 is declared tables are no longer processed.</p>
</li>
<li><p>Input and output encoding are problematic at least.</p></li>
</ul>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Thierry Humphrey.
      
    </div>

    

    
  </body>
</html>